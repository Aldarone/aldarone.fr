<!DOCTYPE html>
<html lang="fr-fr">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    


    
        
        <meta name="twitter:card" content="summary_large_image"/>
        <meta name="twitter:image" content="https://aldarone.fr/img/danger-sign.jpg"/>
    



<meta name="twitter:title" content="Fuck you ownCloud. Fuck you."/>
<meta name="twitter:description" content="/!\ Ce billet contient un certain niveau de rage et de frustration envers un logiciel non coopératif et bugué. Merci d&rsquo;en tenir compte lors de votre lecture. /! Mise à jour du 09 décembre 2014, 14h J&rsquo;ai reçu un mail d&rsquo;un lecteur qui m&rsquo;explique comment il a laissé tomber Owncloud devant le manque constant de fiabilité et est passé à SeaFile. Il donne plus de détails sur son blog : « Ownbutt, SparkleShare, Git-Annex, Seafile&hellip; Quelle solution libre pour héberger et synchroniser ses fichiers ?"/>

    <meta name="twitter:site" content="@WebScrewdriver"/>



  	<meta property="og:title" content=" Fuck you ownCloud. Fuck you. &middot;  Aldarone.fr" />
  	<meta property="og:site_name" content="Aldarone.fr" />
  	<meta property="og:url" content="https://aldarone.fr/fuck-you-owncloud-fuck-you" />

    
  	<meta property="og:type" content="article" />

        
            <meta name="og:image" content="https://aldarone.fr/img/danger-sign.jpg"/>
        

    <meta property="og:article:published_time" content="2014-12-08T00:00:00Z" />

    
    

    <title>
       Fuck you ownCloud. Fuck you. &middot;  Aldarone.fr
    </title>

    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://aldarone.fr/images/favicon.ico">
	  <link rel="apple-touch-icon" href="https://aldarone.fr/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="https://aldarone.fr/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="https://aldarone.fr/css/nav.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400|Inconsolata" />


    
      
          <link href="https://aldarone.fr/index.xml" rel="alternate" type="application/rss+xml" title="Aldarone.fr" />
      
      
    
    <meta name="generator" content="Hugo 0.16" />

    <link rel="canonical" href="https://aldarone.fr/fuck-you-owncloud-fuck-you" />

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/">Home</a>
            </li>
        
    </ul>
    
    
    <a class="subscribe-button icon-feed" href="https://aldarone.fr/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">




  
  <header class="main-header post-head" style="background-image: url(https://aldarone.fr/img/danger-sign.jpg)">
  
  <nav class="main-nav overlay clearfix">


  
  
      <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
  
  </nav>
</header>



<main class="content" role="main">




  <article class="post post">

    <header class="post-header">
        <h1 class="post-title">Fuck you ownCloud. Fuck you.</h1>
        <small></small>

        <section class="post-meta">
        
          <time class="post-date" datetime="2014-12-08T00:00:00Z">
            Dec 8, 2014
          </time>
        
         
        </section>
    </header>

    <section class="post-content">
      <p>/!\ Ce billet contient un certain niveau de rage et de frustration envers un logiciel non coopératif et bugué. Merci d&rsquo;en tenir compte lors de votre lecture. /!</p>

<h3>Mise à jour du 09 décembre 2014, 14h</h3>

<p>J&rsquo;ai reçu un mail d&rsquo;un lecteur qui m&rsquo;explique comment il a laissé tomber Owncloud devant le manque constant de fiabilité et est passé à <a href="http://seafile.com/en/home/">SeaFile</a>. Il donne plus de détails sur son blog : « <a href="http://eliotberriot.com/blog/2013/12/18/owncloud-sparkleshare-git-annex-seafile-quelle-solution-libre-pour-heberger-et-synchroniser-ses-fichiers/">Ownbutt, SparkleShare, Git-Annex, Seafile&hellip; Quelle solution libre pour héberger et synchroniser ses fichiers ?</a> » et a rédigé une dépêche sur LinuxFR pour présenter la version 3 : « <a href="https://linuxfr.org/news/seafile-un-dropbox-like-libre-a-heberger-sort-en-version-3">Seafile, un Dropbox-like libre à héberger sort en version 3</a> »</p>

<p>Effectivement ça a l&rsquo;air alléchant, mais SeaFile <a href="https://github.com/haiwen/seafile/issues/801">ne propose pas encore de service CardDav, ni CalDav</a> pour synchroniser des contacts ou des calendriers. Ayant laissé tomber mon instance <a href="http://baikal-server.com/">Baïkal</a> pour passer à OwnCloud, ça m&rsquo;embêterait de séparer à nouveau ces services là.</p>

<h3>Article d'origine</h3>

<p>ownButt est un logiciel en PHP qui sert à héberger son propre service de partage de fichiers. Globalement c&rsquo;est un équivalent libre de Dropbox qui fait aussi de la synchro de contacts et de calendriers.</p>

<p>Il y a quelques temps maintenant, les gestionnaires du projet ont annoncé en grande pompe le module de chiffrement côté serveur qui permet aux utilisateurices de s&rsquo;assurer que leur hébergeur ne pourra pas voir le contenu des fichiers envoyés. (À ce point là, il est important de noter que la personne en charge de l&rsquo;administration dispose d&rsquo;une clé de récupération, au cas où.)</p>

<p>Même si je suis mon propre hébergeur, je me suis empressé d&rsquo;activer ce module lors de l&rsquo;installation de mon instance il y a deux ou trois mois, imaginant déjà libérer mes potes du joug de Dropbox en les rassurant sur le fait que je ne pourrais pas accéder à leurs dick- ou clit-pics sans qu&rsquo;illes soient au courant.</p>

<p>Si vous êtes pressés je vous la fait courte : J&rsquo;aurais pas dû.</p>

<p><img src="https://aldarone.fr/wp-content/uploads/2014/12/yjt6EZL.gif" alt="yjt6EZL" width="500" height="271" class="aligncenter size-full wp-image-1559" /></p>

<p>J&rsquo;ai donc commencé à utiliser le client de synchronisation d&rsquo;abord en transférant toute ma dropbox, puis en activant l&rsquo;envoi automatique de mes photos prises sur mon téléphone, puis en y mettant mes dotfiles pour y avoir accès de partout.</p>

<p>Jusqu&rsquo;au jour où, pour une raison inconnue, le client de synchronisation d&rsquo;ownButt a merdé pendant la synchro de mon dossier .atom (l&rsquo;éditeur de github) et je me suis retrouvé avec MariaDB qui râlait à la DUPLICATE ENTRY dans une table.</p>

<p>Évidemment à ce point il y a trop de fichiers en erreur pour corriger à la main et ça me semble trop aléatoire pour être scripté rapidement.</p>

<p>Après recherches, des pistes semblent indiquer que c&rsquo;est dû à la manière dont le module de chiffrement gère (mal) les noms de fichiers. Je me suis donc dit que j&rsquo;allais juste le désactiver, qu&rsquo;ownButt déchiffrerait mes fichiers au fil des accès et que j&rsquo;aurais juste à supprimer mon dossier pourri et à le renvoyer.</p>

<p>Hahaha, naïf que je suis. Il faut lancer manuellement une requête de déchiffrement dans les options et évidemment ça prend un temps fou. Firefox laisse tomber la requête AJAX au bout d&rsquo;une demi heure, mais ça continue de tourner et c&rsquo;est le max execution time de PHP qui détermine le temps avant plantage (En l’occurrence, ce fut une heure)</p>

<p>Je ne me laisse pas démonter et je met un petit <code>set_time_limit(0)</code> au début du script histoire d&rsquo;être sûr et je le relance en gardant un œil sur les logs dans un <a href="http://danielmiessler.com/study/tmux/">tmux</a>. Deux heures plus tard il plante à nouveau <code>Calling method -&gt;machintruc() on a non-object</code></p>

<p>Je commence un peu à m&rsquo;échauffer parce que quand on utilise des fonctions qui renvoient <code>null</code> ou un objet, la moindre des choses c&rsquo;est de vérifier qu&rsquo;on a bien un objet après l&rsquo;appel à cette fonction… J&rsquo;ajoute cette vérif en loguant bien les erreurs et je relance le bouzin.</p>

<p>Après cinq heures à mouliner<sup id="fnref:1"><a href="1" rel="footnote">1</a></sup> c&rsquo;est au tour de MariaDB de se plaindre : <code>General error: 2006 MySQL server has gone away</code> Parce que oui, le timeout il est par défaut à 300 secondes. Donc on ouvre la connexion et cinq heures plus tard il y a plus personne au bout du fil. Nouvel essai.</p>

<p>Après 6 heures, les logs s&rsquo;arrêtent de défiler (j&rsquo;ai rajouté le log du chemin de chaque fichier déchiffré histoire de voir quand ça s&rsquo;arrête parce que sinon c&rsquo;est le noir complet) et comme il n&rsquo;y a pas d&rsquo;erreur je commence à me dire que ça y est, peut-être mes galères sont terminées. Je me connecte donc à l&rsquo;interface web pour voir et… « <em>Le chiffrement était désactivé mais vos fichiers sont toujours chiffrés. Veuillez vous rendre sur vos Paramètres personnels pour déchiffrer vos fichiers.</em> » cette cochonnerie de message est toujours là. MAIS IL Y A PAS D&rsquo;ERREUR ! APACHE SE TOURNE LES POUCES !</p>

<p>Évidemment après vérification, une grande partie de mes fichiers est toujours chiffrée, j&rsquo;ai beau relancer leur script de merde ça ne change absolument rien et le client de synchro râle toujours qu&rsquo;il n&rsquo;a pas pu synchroniser * fichiers en raison d&rsquo;une erreur inattendue sur le serveur.</p>

<p>Bref, je suis bon pour tout supprimer et tout renvoyer. Ce qui avec mon accès ADSL va prendre environ… 130 heures à vitesse maxi. (&#12494;&#3232;&#30410;&#3232;)&#12494;</p>

<p>N&rsquo;activez pas le module de chiffrement d&rsquo;ownButt. Sauf si vous voulez vous prendre la tête pour rien.</p>

<div class="footnotes">
<hr />
<ol>

<li id="fn:1">
J'ai 7Go de données, je veux bien que ça prenne du temps, mais c'est rageant quand ça plante pour des conneries…&#160;<a href="1" rev="footnote">&#8617;</a>
</li>

</ol>
</div>

    </section>


  <footer class="post-footer">


    

    





<section class="author">
  <h4><a href="https://aldarone.fr/">Alda Marteau-Hardi</a></h4>
  
  <p>Je fais du PHP et du Javascript. Et j&#39;essaye aussi d&#39;être un humain décent.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Alsace, France</span>
    <span class="author-link icon-link"><a href="http://aldarone.fr/">http://aldarone.fr/</a></span>
  </div>
</section>



    
<section class="share">
  <h4>Share this post</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Fuck%20you%20ownCloud.%20Fuck%20you.&nbsp;-&nbsp;Aldarone.fr&amp;url=https%3a%2f%2faldarone.fr%2ffuck-you-owncloud-fuck-you"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2faldarone.fr%2ffuck-you-owncloud-fuck-you"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2faldarone.fr%2ffuck-you-owncloud-fuck-you&amp;description=Fuck%20you%20ownCloud.%20Fuck%20you."
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2faldarone.fr%2ffuck-you-owncloud-fuck-you"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    

<div id="isso-thread"></div>
<script src="//comments.aldarone.fr/js/embed.min.js" type="text/javascript" charset="utf-8" data-isso="//comments.aldarone.fr/"></script>
<noscript>Please enable JavaScript to view the <a href="https://posativ.org/isso/">comments powered by Isso.</a></noscript>




  </footer>
</article>

</main>

<aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="/un-troll-ou-pas-un-troll-differentes-lectures-dune-capture-des-simpsons">
          <section class="post">
              <h2>Un troll ? Ou pas un troll ? Différentes lectures d&#39;une capture des Simpsons</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="/jouer-a-discworld-sur-un-pc-recent">
          <section class="post">
              <h2>Jouer à Discworld sur un PC récent</h2>
          </section>
      </a>
  
</aside>

    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Aldarone.fr</a> 2011 - 2016. Publié sous licence Creative Commons Attribution-NoDerivatives 4.0 International</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="https://aldarone.fr/js/jquery.js"></script>
    <script type="text/javascript" src="https://aldarone.fr/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://aldarone.fr/js/index.js"></script>
    
        
<script type="text/javascript">
  var _paq = _paq || [];
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//stats.aldarone.fr/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId',  1 ]);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<noscript><p><img src="//stats.aldarone.fr/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>


    
</body>
</html>

